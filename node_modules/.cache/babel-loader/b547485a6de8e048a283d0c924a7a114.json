{"remainingRequest":"/Users/berkaykosebay/Documents/GitHub/brkosebay/node_modules/thread-loader/dist/cjs.js!/Users/berkaykosebay/Documents/GitHub/brkosebay/node_modules/babel-loader/lib/index.js!/Users/berkaykosebay/Documents/GitHub/brkosebay/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/berkaykosebay/Documents/GitHub/brkosebay/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/berkaykosebay/Documents/GitHub/brkosebay/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/berkaykosebay/Documents/GitHub/brkosebay/src/views/fileUpload.vue?vue&type=template&id=62df9d66&scoped=true","dependencies":[{"path":"/Users/berkaykosebay/Documents/GitHub/brkosebay/src/views/fileUpload.vue","mtime":1620287128206},{"path":"/Users/berkaykosebay/Documents/GitHub/brkosebay/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/berkaykosebay/Documents/GitHub/brkosebay/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/berkaykosebay/Documents/GitHub/brkosebay/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/berkaykosebay/Documents/GitHub/brkosebay/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1616796459000},{"path":"/Users/berkaykosebay/Documents/GitHub/brkosebay/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/berkaykosebay/Documents/GitHub/brkosebay/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCB2TW9kZWxUZXh0IGFzIF92TW9kZWxUZXh0LCB3aXRoRGlyZWN0aXZlcyBhcyBfd2l0aERpcmVjdGl2ZXMsIEZyYWdtZW50IGFzIF9GcmFnbWVudCwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jaywgd2l0aFNjb3BlSWQgYXMgX3dpdGhTY29wZUlkLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKdmFyIF93aXRoSWQgPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKCJkYXRhLXYtNjJkZjlkNjYiKTsKCl9wdXNoU2NvcGVJZCgiZGF0YS12LTYyZGY5ZDY2Iik7Cgp2YXIgX2hvaXN0ZWRfMSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImgxIiwgbnVsbCwgIkZpbGUgVXBsb2FkIFBhZ2UiLCAtMSk7Cgp2YXIgX2hvaXN0ZWRfMiA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoInAiLCB7CiAgaWQ6ICJtc2ciCn0sIG51bGwsIC0xKTsKCnZhciBfaG9pc3RlZF8zID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiYnIiLCBudWxsLCBudWxsLCAtMSk7Cgp2YXIgX2hvaXN0ZWRfNCA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImJyIiwgbnVsbCwgbnVsbCwgLTEpOwoKdmFyIF9ob2lzdGVkXzUgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJiciIsIG51bGwsIG51bGwsIC0xKTsKCnZhciBfaG9pc3RlZF82ID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiYnIiLCBudWxsLCBudWxsLCAtMSk7Cgp2YXIgX2hvaXN0ZWRfNyA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoInVsIiwgewogIGlkOiAibGlzdCIKfSwgbnVsbCwgLTEpOwoKdmFyIF9ob2lzdGVkXzggPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJiciIsIG51bGwsIG51bGwsIC0xKTsKCnZhciBfaG9pc3RlZF85ID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiYnIiLCBudWxsLCBudWxsLCAtMSk7Cgp2YXIgX2hvaXN0ZWRfMTAgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgaWQ6ICJ2aXMiCn0sIG51bGwsIC0xKTsKCl9wb3BTY29wZUlkKCk7CgpleHBvcnQgdmFyIHJlbmRlciA9IC8qI19fUFVSRV9fKi9fd2l0aElkKGZ1bmN0aW9uIChfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX0ZyYWdtZW50LCBudWxsLCBbX2NyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgICBjbGFzczogImZpbGV1cGxvYWQiLAogICAgc3R5bGU6IHsKICAgICAgZGlzcGxheTogX2N0eC5ncmlkCiAgICB9CiAgfSwgW19ob2lzdGVkXzEsIF93aXRoRGlyZWN0aXZlcyhfY3JlYXRlVk5vZGUoImlucHV0IiwgewogICAgdHlwZTogInRleHQiLAogICAgcGxhY2Vob2xkZXI6ICJOYW1lIG9mIHRoZSBEYXRhc2V0IiwKICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzFdIHx8IChfY2FjaGVbMV0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHJldHVybiAkZGF0YS5kYXRhc2V0cy5kYXRhTmFtZSA9ICRldmVudDsKICAgIH0pLAogICAgY2xhc3M6ICJmb3JtLWNvbnRyb2wiCiAgfSwgbnVsbCwgNTEyKSwgW1tfdk1vZGVsVGV4dCwgJGRhdGEuZGF0YXNldHMuZGF0YU5hbWVdXSksIF9ob2lzdGVkXzIsIF9ob2lzdGVkXzMsIF9ob2lzdGVkXzQsIF9jcmVhdGVWTm9kZSgiaW5wdXQiLCB7CiAgICB0eXBlOiAiZmlsZSIsCiAgICBhY2NlcHQ6ICIuY3N2IiwKICAgIG9uQ2hhbmdlOiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICRvcHRpb25zLnNlbGVjdEZpbGUgJiYgJG9wdGlvbnMuc2VsZWN0RmlsZS5hcHBseSgkb3B0aW9ucywgYXJndW1lbnRzKTsKICAgIH0pCiAgfSwgbnVsbCwgMzIpLCBfY3JlYXRlVk5vZGUoImJ1dHRvbiIsIHsKICAgIG9uQ2xpY2s6IF9jYWNoZVszXSB8fCAoX2NhY2hlWzNdID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gJG9wdGlvbnMudXBsb2FkRmlsZSAmJiAkb3B0aW9ucy51cGxvYWRGaWxlLmFwcGx5KCRvcHRpb25zLCBhcmd1bWVudHMpOwogICAgfSkKICB9LCAiVXBsb2FkIiksIF9ob2lzdGVkXzUsIF9ob2lzdGVkXzYsIF9ob2lzdGVkXzddLCA0KSwgX2hvaXN0ZWRfOCwgX2hvaXN0ZWRfOSwgX2hvaXN0ZWRfMTBdLCA2NCk7Cn0pOw=="},{"version":3,"sources":["/Users/berkaykosebay/Documents/GitHub/brkosebay/src/views/fileUpload.vue"],"names":[],"mappings":";;;;;;8BAEI,YAAA,CAAyB,IAAzB,EAAyB,IAAzB,EAAI,kBAAJ,EAAoB,CAAA,CAApB,C;;8BAEA,YAAA,CAAgB,GAAhB,EAAgB;AAAb,EAAA,EAAE,EAAC;AAAU,CAAhB,EAAW,IAAX,EAAW,CAAA,CAAX,C;;8BAAgB,YAAA,CAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI,CAAA,CAAJ,C;;8BAAI,YAAA,CAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI,CAAA,CAAJ,C;;8BAC6E,YAAA,CAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI,CAAA,CAAJ,C;;8BAAI,YAAA,CAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI,CAAA,CAAJ,C;;8BACrG,YAAA,CAAoB,IAApB,EAAoB;AAAhB,EAAA,EAAE,EAAC;AAAa,CAApB,EAAa,IAAb,EAAa,CAAA,CAAb,C;;8BACI,YAAA,CAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI,CAAA,CAAJ,C;;8BAAI,YAAA,CAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI,CAAA,CAAJ,C;;+BACV,YAAA,CAAoB,KAApB,EAAoB;AAAf,EAAA,EAAE,EAAC;AAAY,CAApB,EAAa,IAAb,EAAa,CAAA,CAAb,C;;;;;sDAPA,YAAA,CAMM,KANN,EAMM;AAND,IAAA,KAAK,EAAC,YAML;AANyB,IAAA,KAAK,EAAA;AAAA,MAAA,OAAA,EAAW,IAAA,CAAA;AAAX;AAM9B,GANN,E,CACE,U,kBACA,YAAA,CAAoG,OAApG,EAAoG;AAA7F,IAAA,IAAI,EAAC,MAAwF;AAAjF,IAAA,WAAW,EAAC,qBAAqE;;aAAvC,KAAA,CAAA,QAAA,CAAS,QAAT,GAAiB,M;MAAsB;AAArB,IAAA,KAAK,EAAC;AAAe,GAApG,E,IAAA,E,GAAA,C,iBAA6D,KAAA,CAAA,QAAA,CAAS,Q,KACtE,U,EAAgB,U,EAAI,U,EACpB,YAAA,CAAsD,OAAtD,EAAsD;AAA/C,IAAA,IAAI,EAAC,MAA0C;AAAnC,IAAA,MAAM,EAAC,MAA4B;AAApB,IAAA,QAAM,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,QAAA,CAAA,UAAA,IAAA,QAAA,CAAA,UAAA,OAAA,QAAA,YAAF;AAAA,KAAA;AAAc,GAAtD,E,IAAA,E,EAAA,C,EAAsD,YAAA,CAA2C,QAA3C,EAA2C;AAAlC,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,aAAE,QAAA,CAAA,UAAA,IAAA,QAAA,CAAA,UAAA,OAAA,QAAA,YAAF;AAAA,KAAA;AAA6B,GAA3C,EAA4B,QAA5B,C,EAA2C,U,EAAI,U,EACrG,U,CALF,E,CAAA,C,EAMM,U,EAAI,U,EACV,W","sourcesContent":["<template>\n  <div class=\"fileupload\" v-bind:style=\"{display:grid}\">\n    <h1>File Upload Page</h1>\n    <input type=\"text\" placeholder=\"Name of the Dataset\" v-model=datasets.dataName class=\"form-control\">\n    <p id=\"msg\"></p><br><br>\n    <input type=\"file\" accept=\".csv\" @change=\"selectFile\"><button @click=\"uploadFile\">Upload</button><br><br>\n    <ul id=\"list\"> </ul>\n  </div><br><br>\n  <div id=\"vis\"></div>\n</template>\n\n<script>\nimport firebase from 'firebase';\nimport * as d3 from 'd3';\nimport {db} from '../main'\n\nexport default {\n  name: 'fileUpload',\n  data () {\n      return {\n        datasets: {\n          fileLink: null,\n          dataName: null,\n        },\n          selectedFile: null,\n          datasetNo: 0\n      }\n  },\n  mounted() {\n    this.getAllDatabaseEntries(); //the mounted() lifecycle executes after all components of the page have finished loading, so after the page is ready\n                                  // the previous uploaded datasets are visible in the page.\n  },\n  methods: {\n      selectFile(event) {\n          this.selectedFile = event.target.files[0] //Selects the uploaded file and assigns it to the \"selectedFile\" variable.\n          //TODO: Add proper checks to ensure that the files given are csv files.\n      },\n      uploadFile() {\n          let fileName = `${this.selectedFile.name}`;\n          var storageRef = firebase.storage().ref(fileName);\n          let uploadTask = storageRef.put(this.selectedFile);\n          uploadTask.on('state_changed', () => {\n          }, (error) => {\n            //Handle unsuccessfull uploads.\n            console.log(error);\n          }, () => {\n            //Handle successfull uploads.\n            uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {\n              this.datasets.fileLink = downloadURL;\n              this.saveDataToDB();\n            })\n          })\n          },\n        saveDataToDB() {\n          db.collection(\"datasets\").add(this.datasets).then((docRef) => {\n            var sucMsg = document.getElementById(\"msg\")\n            sucMsg.innerHTML = \"The dataset has been uploaded successfully.\"\n            console.log(\"Document written with ID: \", docRef.id);\n          })\n          .catch( (error) => {\n            console.error(\"Error adding document: \", error);\n          })\n          },\n        showDatabaseEntries(name, link) {\n          var ul = document.getElementById('list');\n          var header = document.createElement('h2');\n          var _name = document.createElement('li');\n          var _visualise = document.createElement('button');\n          var visDiv = document.getElementById('vis');\n         // var testParaghraph = document.createElement(\"h2\");\n          header.innerHTML = \"Dataset-\"+ (++this.datasetNo);\n          _name.innerHTML=\"Name of the dataset: \"+name;\n          _visualise.innerHTML = \"Visualise\";\n          _visualise.onclick = async () => {\n            visDiv.innerHTML=\"\";\n            const response = await fetch(link);\n            const data = d3.csvParse(await response.text(), d3.autoType);\n            var array = [];\n            data.columns.forEach((hello) => {\n              var obj = {}\n              obj[\"property\"] = hello;\n              obj[\"value\"] = hello.length;\n              array.push(obj)\n            })\n            //testParaghraph.innerHTML = data.columns.length;\n            //visDiv.appendChild(testParaghraph);\n            this.generateArc(array);\n            console.log(array);\n          }\n          ul.appendChild(header);\n          ul.appendChild(_name);\n          ul.appendChild(_visualise);\n        },\n        getAllDatabaseEntries() {\n          db.collection('datasets').get().then((snapshot) => {\n            snapshot.forEach((doc) => {\n              let name = doc.data().dataName;\n              let link = doc.data().fileLink;\n              this.showDatabaseEntries(name, link);\n            }\n            )\n          }\n          )\n        },\n        generateArc(array) {\n      var w = 500;\n      var h = 500;\n      var colors = d3.scaleOrdinal(d3.schemeDark2);\n      //var margin = 45;\n\n      //var radius = Math.min(w, h) / 2 - margin\n\n      var svg = d3\n        .select(\"#vis\")\n        .append(\"svg\")\n        .attr(\"width\", w)\n        .attr(\"height\", h)\n        .style(\"background\", \"black\");\n\n      var data = d3.pie().sort(null).value(function(d){return d.value})(array);\n      var arcs = d3.arc()\n                    .innerRadius(0)\n                    .outerRadius(200)\n                    .padAngle(.05)\n                    .padRadius(50);\n      var pies = svg.append(\"g\").attr(\"transform\", \"translate(250, 250)\")\n                               .selectAll(\"path\").data(data);\n      pies.enter().append(\"path\").attr(\"d\", arcs).attr(\"fill\", function(d){return colors(d.data.value);});\n}\n}\n}\n</script>\n<style scoped>\n  ul{\n    list-style-type: none;\n  }\n</style>\n\n"],"sourceRoot":""}]}